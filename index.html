<!DOCTYPE html>
<html>
  <head>
    <title>Presentation</title>

    <meta charset='utf-8'>
    <style type="text/css">
    
    article {
      padding-top: 40px;
    }
    h3 {
      padding-top: 30px;
    }
    
    </style>
    <script src="slides.js"></script>
  </head>
    <body style='display: none'>

    <section class='slides layout-regular template-default'>
      <article>
        <h1>How Browsers Work</h1>
        <h3>Ehsan Akhgari</h3>
        <h3>Mozilla Corporation</h3>
      </article>
      <article>
        <h3>Overview</h3>
        <ul>
          <li>Describing the internals of a web browser
          <li>Some of the challenges on implementing a browser
          <li>Some of the interesting stuff people are working on today
          <li>Some of the interesting future directions
      </article>
      <article>
        <h3>First things first</h3>
        <ul>
          <li>Focused on things common between the browser engines
            <ul>
              <li>Gecko (used in Firefox, Thunderbird, etc.)
              <li>WebKit (used in Chrome, Safari, etc.)
              <li>Trident (used in IE, etc.)
              <li>Presto (used in Opera, etc.)
          </li>
      </article>
      <article>
        <h3>How browsers work: bird's-eye view</h3>
        <svg width="720" height="600">
         <defs>
          <marker id="se_marker_start_svg_25" markerUnits="strokeWidth" orient="auto" viewBox="0 0 100 100" markerWidth="5" markerHeight="5" refX="50" refY="50">
           <path id="svg_15" d="m0,50l100,40l-30,-40l30,-40l-100,40z" fill="#000000" stroke="#000000" stroke-width="10"/>
          </marker>
          <marker id="se_marker_end_svg_26" markerUnits="strokeWidth" orient="auto" viewBox="0 0 100 100" markerWidth="5" markerHeight="5" refX="50" refY="50">
           <path id="svg_24" d="m100,50l-100,40l30,-40l-30,-40l100,40z" fill="#000000" stroke="#000000" stroke-width="10"/>
          </marker>

         </defs>
         <g>
          <rect id="svg_1" height="95" width="317" y="201" x="197" stroke="#000000" fill="#018ec1"/>
          <rect height="95" width="317" y="336.5" x="197" stroke="#000000" fill="#018ec1" id="svg_6"/>
          <rect height="95" width="317" y="470.5" x="197" stroke="#000000" fill="#018ec1" id="svg_7"/>
          <g id="svg_17">
           <rect height="95" width="317" y="201" x="197" stroke="#000000" fill="#018ec1" id="svg_8"/>

           <text fill="#ffffff" stroke="#000000" stroke-width="0" x="355.5" y="259" id="svg_16" font-size="40" font-family="Sans-serif" text-anchor="middle" xml:space="preserve">Communication</text>
          </g>
          <g id="svg_20">
           <rect height="95" width="317" y="336.5" x="197" stroke="#000000" fill="#018ec1" id="svg_13"/>
           <text fill="#ffffff" stroke="#000000" stroke-width="0" x="355.5" y="394.5" id="svg_18" font-size="40" font-family="Sans-serif" text-anchor="middle" xml:space="preserve">Processing</text>
          </g>
          <g id="svg_22">
           <g id="svg_5">

            <ellipse fill="#9ee6ff" stroke="#000000" stroke-width="0" cx="291" cy="95" id="svg_2" rx="77" ry="61"/>
            <ellipse fill="#9ee6ff" stroke="#000000" stroke-width="0" cx="376" cy="68" rx="77" ry="61" id="svg_3"/>
            <ellipse fill="#9ee6ff" stroke="#000000" stroke-width="0" cx="411" cy="106" rx="77" ry="61" id="svg_4"/>
           </g>
           <g id="svg_9">
            <ellipse fill="#9ee6ff" stroke="#000000" stroke-width="0" cx="295.5" cy="95" rx="77" ry="61" id="svg_10"/>
            <ellipse fill="#9ee6ff" stroke="#000000" stroke-width="0" cx="380.5" cy="68" rx="77" ry="61" id="svg_11"/>
            <ellipse fill="#9ee6ff" stroke="#000000" stroke-width="0" cx="415.5" cy="106" rx="77" ry="61" id="svg_12"/>
           </g>

           <text fill="#000000" stroke="#000000" stroke-width="0" x="355.5" y="97.5" id="svg_21" font-size="40" font-family="Sans-serif" text-anchor="middle" xml:space="preserve">Cloud</text>
          </g>
          <g id="svg_23">
           <rect height="95" width="317" y="470.5" x="197" stroke="#000000" fill="#018ec1" id="svg_14"/>
           <text fill="#ffffff" stroke="#000000" stroke-width="0" x="355.5" y="528.5" id="svg_19" font-size="40" font-family="Sans-serif" text-anchor="middle" xml:space="preserve">Presentation</text>
          </g>
          <g id="svg_27">
           <line fill="none" stroke="#000000" stroke-width="5" x1="291" y1="164" x2="290" y2="211" id="svg_25" marker-start="url(#se_marker_start_svg_25)"/>

           <line fill="none" stroke="#000000" stroke-width="5" x1="422" y1="153" x2="421" y2="200" id="svg_26" marker-end="url(#se_marker_end_svg_26)"/>
          </g>
          <g id="svg_28">
           <line fill="none" stroke="#000000" stroke-width="5" x1="291" y1="300" x2="290" y2="347" marker-start="url(#se_marker_start_svg_25)" id="svg_29"/>
           <line fill="none" stroke="#000000" stroke-width="5" x1="422" y1="289" x2="421" y2="336" marker-end="url(#se_marker_end_svg_26)" id="svg_30"/>
          </g>
          <g id="svg_34">
           <line fill="none" stroke="#000000" stroke-width="5" x1="291" y1="435" x2="290" y2="482" marker-start="url(#se_marker_start_svg_25)" id="svg_35"/>
           <line fill="none" stroke="#000000" stroke-width="5" x1="422" y1="424" x2="421" y2="471" marker-end="url(#se_marker_end_svg_26)" id="svg_36"/>

          </g>
         </g>
        </svg>
      </article>
      <article>
        <h3>Communication layer</h3>
        <ul>
          <li>Also known as the network layer
          <li>The input is a URI, the output is usually a stream of bytes
          <li>Mostly consisting of
            <ul>
              <li>A URI parser
              <li>Implementations of web protocols (HTTP, FTP, etc.)
              <li>A local file system access layer
              <li>Encryption facilities for secure communications
              <li>In-memory and on-disk caches to make network access faster
          </li>
      </article>
      <article>
        <h3>Processing layer</h3>
        <ul>
          <li>Most of the &quot;meet&quot; is here!
          <li>Things like <em>HTML</em>, <em>CSS</em>, <em>Javascript</em>, etc. live here
          <li>Input is a stream of bytes and some metadata, output is some form of
              presentation (hint: <em>not</em> always a rendering on the screen)
          <li>Typically asks the communications layer for some more URIs to be loaded
          <li>Another input source comes from the presentation layer
              (e.g., mouse clicks, keyboard input, etc.)
      </article>
      <article>
        <h3>A picture says&hellip;</h3>
        <svg width="720" height="600">
         <defs>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_85">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_84">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>

          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_87">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_88">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_90">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>

          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_92">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_94">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_100">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>

          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_101">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_102">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>
          <marker refY="50" refX="50" markerHeight="5" markerWidth="5" viewBox="0 0 100 100" se_type="rightarrow" orient="auto" markerUnits="strokeWidth" id="se_marker_end_svg_103">
           <path stroke-width="10" stroke="#000000" fill="#000000" d="m100,50l-100,40l30,-40l-30,-40z"/>
          </marker>

         </defs>
         <g>
          <g id="svg_62">
           <path id="svg_57" d="m101.357407,562.333984l20.000793,-66.671021l80.003128,0l-20.000778,66.671021l-80.003143,0z" stroke="#000000" fill="#003f7f"/>
           <g id="svg_61">
            <text id="svg_59" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="524.5" x="151.357422" stroke-width="0" stroke="#000000" fill="#ffffff">Render</text>
            <text id="svg_60" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="544.5" x="151.357422" stroke-width="0" stroke="#000000" fill="#ffffff">Tree</text>

           </g>
          </g>
          <g id="svg_77">
           <g id="svg_55">
            <path id="svg_53" d="m87.46991,411.001251l127.781738,0l0,47.502594l-127.781738,0l0,-47.502594zm15.973419,-47.501556l0,47.501556m95.834885,-47.501556l0,47.501556" stroke="#000000" fill="#ffffaa"/>
            <text transform="matrix(1.43928, 0, 0, 1.22185, -48.1494, -85.6418)" id="svg_54" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="432.281474" x="138.619609" stroke-width="0" stroke="#000000" fill="#000000">Layout</text>
           </g>
           <g id="svg_49">

            <path id="svg_35" d="m150.999985,364.585968l20.000793,-66.671051l80.003128,0l-20.000793,66.671051l-80.003128,0z" stroke="#000000" fill="#003f7f"/>
            <g id="svg_48">
             <text id="svg_36" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="326.751953" x="201.003906" stroke-width="0" stroke="#000000" fill="#ffffff">Style</text>
             <text id="svg_37" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="346.751953" x="201.003906" stroke-width="0" stroke="#000000" fill="#ffffff">Rules</text>
            </g>
           </g>
           <g id="svg_51">
            <path id="svg_30" d="m51.716785,364.585968l20.00079,-66.671051l80.003128,0l-20.000778,66.671051l-80.003139,0z" stroke="#000000" fill="#003f7f"/>

            <g id="svg_50">
             <text xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" id="svg_33" y="326.751953" x="101.716797" stroke-width="0" stroke="#000000" fill="#ffffff">DOM</text>
             <text id="svg_34" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="346.751953" x="101.716797" stroke-width="0" stroke="#000000" fill="#ffffff">Tree</text>
            </g>
           </g>
          </g>
          <g id="svg_78">
           <g id="svg_20">

            <path id="svg_17" d="m46.666058,125.007095l88.78159,0l0,49.502609l-88.78159,0l0,-49.502609zm11.098186,-49.501549l0,49.501549m66.585213,-49.501549l0,49.501549" stroke="#000000" fill="#ffffaa"/>
            <text xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" id="svg_19" y="155.902344" x="91.058594" stroke-width="0" stroke="#000000" fill="#000000">Parser</text>
           </g>
           <g id="svg_16">
            <path id="svg_1" d="m56.076752,19.422462l69.963593,0l0,56.863022c-34.981926,0 -34.981926,21.665634 -69.963593,9.35569l0,-66.218712z" stroke="#000000" fill="#ffffaa"/>
            <text xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="40" id="svg_2" y="64.925781" x="91.058594" stroke-width="0" stroke="#000000" fill="#ffffff"/>
            <text xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" id="svg_3" y="59.925781" x="91.058594" stroke-width="0" stroke="#000000" fill="#000000">HTML</text>
           </g>

          </g>
          <g id="svg_79">
           <g id="svg_21">
            <path id="svg_22" d="m162.607468,125.001236l88.78157,0l0,49.502609l-88.78157,0l0,-49.502609zm11.09819,-49.501549l0,49.501549m66.585205,-49.501549l0,49.501549" stroke="#000000" fill="#ffffaa"/>
            <text id="svg_23" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="155.896484" x="207" stroke-width="0" stroke="#000000" fill="#000000">Parser</text>
           </g>
           <g id="svg_15">
            <path id="svg_4" d="m172.018158,19.420509l69.963593,0l0,56.863022c-34.981934,0 -34.981934,21.665634 -69.963593,9.35569l0,-66.218712z" stroke="#000000" fill="#ffffaa"/>

            <text id="svg_5" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="40" y="64.923828" x="207" stroke-width="0" stroke="#000000" fill="#ffffff"/>
            <text id="svg_6" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="59.923828" x="207" stroke-width="0" stroke="#000000" fill="#000000">CSS</text>
           </g>
          </g>
          <g id="svg_80">
           <g id="svg_24">
            <path id="svg_25" d="m382.609406,125.001236l88.781586,0l0,49.502609l-88.781586,0l0,-49.502609zm11.098206,-49.501549l0,49.501549m66.585205,-49.501549l0,49.501549" stroke="#000000" fill="#ffffaa"/>
            <text id="svg_26" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="155.896484" x="427.001953" stroke-width="0" stroke="#000000" fill="#000000">Parser</text>

           </g>
           <g id="svg_14">
            <path id="svg_7" d="m392.020142,19.420502l69.963562,0l0,56.863037c-34.981934,0 -34.981934,21.665619 -69.963562,9.355682l0,-66.218719z" stroke="#000000" fill="#ffffaa"/>
            <text id="svg_8" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="40" y="64.923828" x="427.001953" stroke-width="0" stroke="#000000" fill="#ffffff"/>
            <text id="svg_9" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="59.923828" x="427.001953" stroke-width="0" stroke="#000000" fill="#000000">JS</text>
           </g>
          </g>
          <g id="svg_81">

           <g id="svg_75">
            <path id="svg_28" d="m576.802734,125.001236l88.781616,0l0,49.502609l-88.781616,0l0,-49.502609zm11.098267,-49.501549l0,49.501549m66.585205,-49.501549l0,49.501549" stroke="#000000" fill="#ffffaa"/>
            <text id="svg_29" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="155.896484" x="621.195313" stroke-width="0" stroke="#000000" fill="#000000">Decoder</text>
           </g>
           <g id="svg_13">
            <path id="svg_10" d="m586.213501,19.420502l69.963562,0l0,56.863037c-34.981934,0 -34.981934,21.665619 -69.963562,9.355682l0,-66.218719z" stroke="#000000" fill="#ffffaa"/>
            <text id="svg_11" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="40" y="64.923828" x="621.195313" stroke-width="0" stroke="#000000" fill="#ffffff"/>
            <text id="svg_12" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="59.923828" x="621.195313" stroke-width="0" stroke="#000000" fill="#000000">Media</text>

           </g>
          </g>
          <g id="svg_82">
           <g id="svg_74">
            <path id="svg_68" d="m582.414063,311.999268l88.781616,0l0,49.502625l-88.781616,0l0,-49.502625zm11.098267,-49.501526l0,49.501526m66.585205,-49.501526l0,49.501526" stroke="#000000" fill="#ffffaa"/>
            <g id="svg_73">
             <text id="svg_69" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="331.5" x="625.806641" stroke-width="0" stroke="#000000" fill="#000000">Post-</text>
             <text id="svg_72" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="351.5" x="625.806641" stroke-width="0" stroke="#000000" fill="#000000">process</text>

            </g>
           </g>
           <g id="svg_45">
            <path id="svg_41" d="m576.804688,272.334015l20.000793,-66.671036l80.003113,0l-20.000793,66.671036l-80.003113,0z" stroke="#000000" fill="#003f7f"/>
            <g id="svg_44">
             <text id="svg_42" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="18" y="233.5" x="626.808594" stroke-width="0" stroke="#000000" fill="#ffffff">Decoded</text>
             <text id="svg_43" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="253.5" x="626.808594" stroke-width="0" stroke="#000000" fill="#ffffff">Media</text>
            </g>

           </g>
          </g>
          <g id="svg_83">
           <g id="svg_66">
            <path id="svg_64" d="m382.611359,316.999268l88.781586,0l0,49.502625l-88.781586,0l0,-49.502625zm11.098206,-49.501526l0,49.501526m66.585205,-49.501526l0,49.501526" stroke="#000000" fill="#ffffaa"/>
            <text id="svg_65" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="347.894531" x="427.003906" stroke-width="0" stroke="#000000" fill="#000000">Execution</text>
           </g>
           <g id="svg_47">

            <path id="svg_38" d="m377,277.334015l20.000793,-66.671036l80.003113,0l-20.000793,66.671036l-80.003113,0z" stroke="#000000" fill="#003f7f"/>
            <g id="svg_46">
             <text id="svg_39" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="239.5" x="427.003906" stroke-width="0" stroke="#000000" fill="#ffffff">JS</text>
             <text id="svg_40" xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" y="259.5" x="427.003906" stroke-width="0" stroke="#000000" fill="#ffffff">IR</text>
            </g>
           </g>
          </g>
          <line stroke-width="2" marker-end="url(#se_marker_end_svg_84)" id="svg_84" y2="293.333335" x2="110" y1="175" x1="89" stroke="#000000" fill="none"/>

          <line stroke-width="2" marker-end="url(#se_marker_end_svg_85)" id="svg_85" y2="292.666667" x2="204" y1="175" x1="209" stroke="#000000" fill="none"/>
          <line marker-end="url(#se_marker_end_svg_87)" id="svg_87" y2="207" x2="431.75" y1="173.75" x1="429.75" stroke-width="2" stroke="#000000" fill="none"/>
          <line marker-end="url(#se_marker_end_svg_88)" id="svg_88" y2="201.249999" x2="630.75" y1="174.749999" x1="626" stroke-width="2" stroke="#000000" fill="none"/>
          <path marker-end="url(#se_marker_end_svg_90)" d="m379.131866,333.048279c-1.740997,-1.356689 -4.062653,-2.687164 -7.678101,-5.18811c-5.176544,-3.58078 -10.557373,-7.263275 -17.275696,-12.451355c-6.718323,-5.188019 -11.438721,-9.454895 -15.356171,-12.451324c-5.649872,-4.321594 -10.777039,-8.020355 -15.356201,-12.451355c-5.056854,-4.89325 -9.992004,-10.056946 -14.396423,-13.488983c-3.482025,-2.713226 -9.0867,-7.031006 -14.396423,-10.376129c-4.465576,-2.813293 -9.822205,-5.699524 -14.396423,-8.300903c-3.062592,-1.741699 -7.656372,-4.249466 -11.517151,-5.188034c-4.774597,-1.160751 -8.549347,-2.590134 -12.476868,-3.112869c-3.810287,-0.507111 -7.684311,-1.273605 -11.517136,-1.037582c-67.51123,4.15715 -68.808609,9.81459 -70.062592,10.376114c-48.545822,29.656189 -49.907593,30.090759 -50.867363,31.128387c-0.959755,1.037628 -1.919518,2.075195 -2.879288,3.112823l0,1.037659" id="svg_90" stroke-width="2" stroke="#000000" fill="none"/>
          <path marker-end="url(#se_marker_end_svg_92)" d="m382,348c0,-1 -2.132996,-1.570007 -6,-3c-4.194,-1.552002 -9.889008,-5.194 -15,-8c-5.880005,-3.227997 -10,-6 -13,-9c-3,-3 -5.730011,-7.229004 -10,-12c-3.77301,-4.214996 -6,-6 -9,-9c-3,-3 -5,-5 -8,-8c-3,-3 -4.881989,-5.190002 -8,-7c-1.93399,-1.122009 -4.078003,-1.790009 -7,-3c-2.06601,-0.855988 -5.712006,-2.981995 -11,-4c-3.928009,-0.756012 -9.015015,-0.70401 -12,-1c-5.074005,-0.502014 -8.824005,-1.485992 -11,-2c-10.705994,-2.527008 -15,0 -19,0c-2,0 -3,0 -4,0c-1,0 -2,0 -4,0c-1,0 -3.076004,0.617004 -4,1c-1.307007,0.540985 -2,2 -3,3c-1,1 -1.617004,2.075989 -2,3c-0.541,1.307007 -2,2 -3,2l-1,1" id="svg_92" stroke-width="2" stroke="#000000" fill="none"/>
          <line marker-end="url(#se_marker_end_svg_94)" id="svg_94" y2="495" x2="157" y1="459" x1="154" stroke-width="2" stroke="#000000" fill="none"/>
          <g id="svg_99">
           <path id="svg_95" d="m445.986359,490.392395l21.665375,-42.499786l86.668945,0c11.967102,0 21.665283,19.026581 21.665283,42.499786c0,23.47345 -9.698181,42.500183 -21.665283,42.500183l-86.668945,0l-21.665375,-42.500183z" stroke-width="2" stroke="#000000" fill="#ffd4aa"/>
           <text xml:space="preserve" text-anchor="middle" font-family="Sans-serif" font-size="20" id="svg_98" y="495.892578" x="510.986328" stroke-width="0" stroke="#000000" fill="#000000">Presentation</text>

          </g>
          <line marker-end="url(#se_marker_end_svg_100)" id="svg_100" y2="492" x2="445" y1="532" x1="191" stroke-width="2" stroke="#000000" fill="none"/>
          <line marker-end="url(#se_marker_end_svg_101)" id="svg_101" y2="448" x2="560" y1="362" x1="628" stroke-width="2" stroke="#000000" fill="none"/>
          <line marker-end="url(#se_marker_end_svg_102)" id="svg_102" y2="339" x2="581" y1="341" x1="472" stroke-width="2" stroke="#000000" fill="none"/>
          <path marker-end="url(#se_marker_end_svg_103)" d="m216,437c1,0 3,0 5,0c4,0 8.990845,0.106476 20,1c13.98967,1.135406 31.003723,2.921234 53,4c19.003448,0.931976 34,1 48,1c14,0 28,0 39,0c10,0 19.990448,-0.090027 29,-1c10.989441,-1.109924 20.993347,-2.05481 29,-3c8.99295,-1.061615 17.126678,-2.548309 25,-5c8.157654,-2.540222 14.141846,-5.761414 21,-10c6.134125,-3.791107 13.184906,-6.857513 17,-12c3.208557,-4.324951 5.288574,-8.868286 7,-13c1.210144,-2.92157 1.51944,-5.038727 2,-8c0.506531,-3.121429 3.398987,-7.898102 5,-15c1.337646,-5.933868 1.587585,-13.017029 2,-18c0.501709,-6.062042 1.806152,-13.030426 3,-20c1.721802,-10.051636 3.929871,-20.009064 5,-28c0.938538,-7.008514 2,-12 2,-16c0,-2 0,-3 0,-5c0,-2 -0.765381,-4.152252 0,-6c0.541199,-1.306549 0.610657,-3.159271 2,-6c1.584106,-3.238922 2.705444,-6.346191 5,-8c1.813965,-1.307465 2.852722,-2.173096 4,-3c1.813965,-1.307465 4.309998,-1.337494 7,-3c1.203003,-0.7435 2.87854,-2.493469 6,-3c1.974182,-0.320374 6,-1 8,-1c1,0 2,0 3,0c2,0 2.82373,-0.486267 5,-1c1.946472,-0.459503 3,0 4,0c1,0 3,0 4,0l1,0l1,0" id="svg_103" stroke-width="2" stroke="#000000" fill="none"/>
         </g>
        </svg>
      </article>
      <article>
        <h3>&hellip; more than a thousand words?</h3>
        <ul>
          <li>Well, that picture doesn't!
          <li>This is an oversimplified model of how the engine works
          <li>Let's get started with parsing HTML
      </article>
      <article>
        <h3>Parsing HTML</h3>
        <ul>
          <li>Keyword here: HTML5
          <li>Everything is HTML5
          <li>No malformed documents
          <li>Handling older content: quirks mode
          <li>HTML documents can point to other resources to load from the network
            <ul>
              <li>Images
              <li>Scripts
              <li>Stylesheets
                <ul>
                  <li>More stylesheets
                </ul>
              <li>etc.
      </article>
      <article>
        <h3>Document Object Model (DOM)</h3>
        <ul>
          <li>HTML documents = Tree structures
          <li>Example:
        </ul>
        <pre>&lt;html&gt;&lt;body&gt;&lt;div&gt;hello&lt;/div&gt;world&lt;/body&gt;&lt;/html&gt;</pre>
        <svg width="300" height="380">
         <g>
          <title>Layer 1</title>
          <g id="svg_17">
           <ellipse ry="25" rx="59" id="svg_1" cy="45" cx="71" stroke="#000000" fill="#ffaaaa"/>
           <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_6" y="51" x="71" stroke-width="0" stroke="#000000" fill="#000000">html</text>

          </g>
          <g id="svg_18">
           <ellipse id="svg_7" ry="25" rx="59" cy="103" cx="121" stroke="#000000" fill="#ffaaaa"/>
           <text id="svg_8" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" y="109" x="121" stroke-width="0" stroke="#000000" fill="#000000">head</text>
          </g>
          <g id="svg_19">
           <ellipse id="svg_9" ry="25" rx="59" cy="162" cx="121" stroke="#000000" fill="#ffaaaa"/>
           <text id="svg_10" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" y="168" x="121" stroke-width="0" stroke="#000000" fill="#000000">body</text>

          </g>
          <g id="svg_20">
           <ellipse id="svg_11" ry="25" rx="59" cy="221" cx="171" stroke="#000000" fill="#ffaaaa"/>
           <text id="svg_12" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" y="227" x="171" stroke-width="0" stroke="#000000" fill="#000000">div</text>
          </g>
          <g id="svg_21">
           <ellipse id="svg_13" ry="25" rx="59" cy="336" cx="171" stroke="#000000" fill="#3f7f00"/>
           <text id="svg_14" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" y="342" x="171" stroke-width="0" stroke="#000000" fill="#000000">"world"</text>

          </g>
          <g id="svg_22">
           <ellipse id="svg_15" ry="25" rx="59" cy="278" cx="231" stroke="#000000" fill="#3f7f00"/>
           <text id="svg_16" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" y="284" x="231" stroke-width="0" stroke="#000000" fill="#000000">"world"</text>
          </g>
          <g id="svg_26">
           <line id="svg_24" y2="162.567267" x2="11.75" y1="45" x1="11.75" stroke="#b2b2b2" fill="none"/>
           <line id="svg_23" y2="104" x2="11.742272" y1="104" x1="62" stroke="#b2b2b2" fill="none"/>

           <line id="svg_25" y2="163" x2="11.742272" y1="163" x1="62" stroke="#b2b2b2" fill="none"/>
          </g>
          <line id="svg_28" y2="335.817682" x2="61.628906" y1="162.750003" x1="61.628906" stroke="#b2b2b2" fill="none"/>
          <line id="svg_29" y2="221.75" x2="61.621178" y1="221.75" x1="111.878906" stroke="#b2b2b2" fill="none"/>
          <line id="svg_30" y2="279.25" x2="61.621283" y1="279.25" x1="171.878915" stroke="#b2b2b2" fill="none"/>
          <line id="svg_31" y2="336.5" x2="61.621178" y1="336.5" x1="111.878906" stroke="#b2b2b2" fill="none"/>
         </g>
        </svg>
      </article>
      <article>
        <h3>More DOM&hellip;</h3>
        <ul>
          <li>The browser uses the DOM for everything
          <li>The original HTML document is thrown away (well, for the most part) after parsing
          <li>The browser can't wait for the whole document before it starts parsing
          <li>Sometimes the browser needs to &quot;wait&quot; for something before it can continue parsing (more on that later)
          <li>The DOM is exposed to web page authors, as we'll see later
      </article>
      <article>
        <h3>Cascading Style Sheets (CSS)</h3>
        <ul>
          <li>Specifies how elements should appear in the output
          <li>Common CSS properties: <code>color</code>, <code>font</code>, <code>border</code>, etc.
          <li>Example:
            <pre class="lang-css">div {
  color: red;
}

p {
  font: serif;
  border: thick solid blue;
}</pre>
          </li>
          <li>Result of parsing: a set of style rules
          <li>Note that they're not going to be useful yet!
      </article>
      <article>
        <h3>Layout</h3>
        <ul>
          <li>This is a large portion of what browser engines do: figuring out where and how to display stuff
          <li>The output of this phase is passed to the presentation layer
      </article>
      <article>
        <h3>Making sense of CSS</h3>
        <ul>
          <li>The first thing that the layout process does is to determine what styles apply to a node in the DOM tree
          <li>Two phases:
            <ul>
              <li>Selector matching
              <li>Style resolution
            </ul>
          <li>After this, we know about all of the styles applying to an element
      </article>
      <article>
        <h3>Data structures for layout</h3>
        <ul>
          <li>Typically, web browsers create some sort of a tree in order to determine the presentation of the DOM tree in face of the existing style rules
          <li>This tree is internal to the browser engine
          <li>A good way of thinking about the elements in this tree is to think of rectangular regions of a page
          <li>Demo time!
      </article>
      <article>
        <h3>More about the layout tree</h3>
        <ul>
          <li>There's usually a one to many mapping from a node in the DOM tree to rectangular areas
          <li>Not all elements in the DOM tree affect the rendering
          <li>CSS tells us which ones do, and how
          <li>We need to compute the visual properties for each area, such as dimensions, background color, border, etc.
          <li>The layout tree may not be very similar to the DOM tree
          <li>Once we finish building this tree, we have an idea of the page will &quot;look&quot;
      </article>
      <article>
        <h3>What about things other than HTML?</h3>
        <ul>
          <li>Typical browsers today are capable of displaying:
            <ul>
              <li>Images (static and animated)
              <li>Video
              <li>Audio
              <li>Fonts
            </ul>
          <li>The browser needs to decode them
          <li>It might post-process them
          <li>The layout process may use these resources (for example, to compute the dimensions of an image)
      </article>
      <article>
        <h3>Javascript</h3>
        <ul>
          <li>One of the complex pieces of a browser engine
          <li>It's a programming language
          <li>Which means that your browser has a &quot;compiler&quot; inside it
          <li>Different Javascript engines work in drastically different ways
          <li>Highly competitive area today
      </article>
      <article>
        <h3>How does my JS code run?</h3>
        <ul>
          <li>Typically, here's how a Javascript engine runs a program
            <ul>
              <li>Parse the source code into some intermediate format
              <li>(Optional step:) analyze the code to gather useful information from it
              <li>Generate runnable code
                <ul>
                  <li>Bytecode
                  <li>Native machine code (Just-in-time compilation)
                </ul>
              <li>Run it
              <li>Modify the generated code if needed
            </ul>
          <li>Lots of details here to take care of
      </article>
      <article>
        <h3>JS meets DOM</h3>
        <ul>
          <li>The DOM tree is exposed to the Javascript code running on the page
          <li>The Javascript code can ask for information from the DOM tree
          <li>The Javascript code can <em>modify</em> the information in the DOM tree
          <li>The Javascript code can call predefined function on the nodes in the DOM tree in order to do useful things
            <ul>
              <li>Also known as the DOM API
            </ul>
          <li>The modification needs to be reflected in the presentation layer
          <li>You are seeing a live demo of this happening in these slides <code>:-)</code>
      </article>
      <article>
        <h3>Dynamic modifications</h3>
        <ul>
          <li>The browser engines keep track of the state of everything in the DOM tree
          <li>A change in the DOM tree may or may not change the output in the presentation layer
          <li>Back to layout: recreate or update the layout tree
          <li>Send the results to the presentation layer to reflect what has changed
      </article>
  </body>
</html>
    
